{"version":3,"sources":["running.svg","editor/lists.ts","editor/templates.ts","editor/consts.ts","editor/utils.ts","editor/seralise.ts","context/InitialState.ts","components/template-types/BaseTemplate.tsx","components/template-types/VoidTemplate.tsx","components/template-types/ListTemplate.tsx","components/template-types/DateTemplate.tsx","components/utils/Element.tsx","components/utils/Leaf.tsx","components/buttons/MarkButton.tsx","components/buttons/BlockButton.tsx","components/buttons/ListButton.tsx","components/Toolbar.tsx","components/buttons/FunctionButton.tsx","components/utils/Portal.tsx","context/DotAbbrevs.ts","components/HoverMenu.tsx","components/HoverList.tsx","utils/fileHandling.ts","components/RichTextEditor.tsx","wraps/VoidBlocks.ts","editor/handlers.ts","components/HelpModalContents.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["EditListPlugin","types","typeItem","withEditList","onKeyDown","Editor","Transforms","Element","indentListItem","editor","increaseItemDepth","dedentListItem","decreaseItemDepth","toggleListBlock","type","isSelectionInList","currentList","getCurrentList","selection","console","log","currentListNode","currentListPath","setNodes","at","unwrapList","wrapInList","findNextTemplate","referencePoint","nextTemplateNodeEntry","next","match","node","mode","voids","nextTemplatePath","select","findPreviousTemplate","lastTemplateNodeEntry","previous","lastTemplatePath","HOTKEYS","BLOCK_HOTKEYS","FUNCTION_HOTKEYS","LIST_TYPES","toggleBlock","format","isActive","isBlockActive","isList","includes","unwrapNodes","n","isEditor","SlateElement","isElement","split","newProperties","block","children","wrapNodes","toggleMark","isMarkActive","removeMark","addMark","nodes","marks","matchBefore","start","beforeOpts","end","rangeEnd","before","beforeRange","range","beforeText","string","beforeMatch","text","toClipboardMD","navigator","clipboard","writeText","preprocessed","map","preprocessMDNode","processor","unified","use","slateToRemark","stringify","bullet","ast","runSync","textLines","tftBlocks","s","join","matchAll","toRemove","tft","matched","index","fPos","val","idx","filter","concat","toMarkdown","then","window","alert","templatesToText","newNode","templateType","defaultValue","value","opt","dateAsString","nodeDate","Date","getDate","getMonth","getFullYear","Text","isText","strong","bold","emphasis","italic","depth","ordered","toHTML","nodeToHTML","nodeText","escapeHTML","underline","toClipboardHTML","item","Blob","error","InitialState","JSON","parse","BaseTemplate","renderProps","attributes","renderChildren","element","tabIndex","selected","useSelected","focused","useFocused","useEditor","useState","name","setName","editName","setEditName","onTop","setOnTop","handleNameChange","useCallback","evt","newName","target","changeProps","props","path","ReactEditor","findPath","newProps","defaultStyles","boxShadow","transform","transition","className","contentEditable","style","position","zIndex","placeholder","onInput","e","key","onClick","icon","VoidTemplate","ListTemplate","isMulti","chosenValue","setChosenValue","opts","options","setOptions","selectRef","useRef","handleChange","newValue","actionMeta","setMenuOpen","ref","styles","customSelectStyles","theme","customSelectTheme","onChange","onCreateOption","inputValue","newOption","createOption","newSetOption","handleCreate","onMenuOpen","onMenuClose","insertListTemplateBlock","templateBlock","insertNodes","move","label","control","provided","state","minHeight","height","paddingTop","valueContainer","currentOptions","getValue","optionsLength","length","reduce","a","b","margin","width","selectProps","minWidth","input","indicatorSeparator","display","indicatorsContainer","menu","marginTop","menuIsOpen","multiValue","marginRight","multiValueLabel","padding","option","noOptionsMessage","borderRadius","spacing","baseUnit","DateTemplate","safeDate","chosenDate","setChosenDate","todayButton","date","modifyDate","isClearable","placeholderText","dateFormat","Leaf","leaf","code","pretemplate","backgroundColor","MarkButton","alt","useSlate","onMouseDown","preventDefault","title","BlockButton","ListButton","checkActive","Toolbar","FunctionButton","fn","Portal","ReactDOM","createPortal","document","body","existingAbbrevs","localStorage","getItem","DotAbbrevsState","atom","default","HoverMenu","setDotAbbrevs","useSetRecoilState","useEffect","el","current","isFocused","Range","isCollapsed","domSelection","getSelection","domRange","getRangeAt","rect","getBoundingClientRect","opacity","top","pageYOffset","offsetHeight","left","pageXOffset","offsetWidth","removeAttribute","abbrevSetter","newAbbrevs","fragment","fragmentName","prompt","fragmentObject","setItem","saveDotAbbrev","HoverList","React","forwardRef","pos","i","active","SelectItem","downloadFile","fileCreator","fileName","blob","fileDownloadURL","URL","createObjectURL","tempLink","createElement","href","setAttribute","click","remove","uploadSingleFile","uploadHandler","fileSelector","addEventListener","event","files","file","fr","FileReader","RichTextEditor","searchRef","setValue","setTarget","fragmentTarget","setFragmentTarget","setIndex","search","setSearch","replaceText","setReplaceText","useRecoilState","abbrevs","setAbbrevs","insertTemplate","setInsertTemplate","renderElement","renderLeaf","useMemo","withHistory","withReact","isInline","isVoid","voidElementNames","elemType","withVoids","createEditor","searchedAbbrevs","Object","fromEntries","entries","toLowerCase","startsWith","insertDateTemplateBlock","insertVoidTemplateBlock","keys","toDOMRange","prevIndex","nextIndex","keyToGet","fragmentToInsert","insertFragment","content","beforeWordRange","beforeWordMatch","edges","wordBefore","unit","wordBeforeMatch","afterMatch","afterOpts","after","afterRange","afterText","matchAfter","distance","beforeTwoCharsRange","beforeTwoCharsMatch","beforeTwoCharsText","readAsText","onload","loaded","result","spellCheck","autoFocus","listKeyDown","hotkey","isHotkey","hotkeyHandler","onSelect","chrome","toDOMPoint","focus","parentElement","scrollIntoView","behavior","HelpModalContents","App","modalOpen","setModalOpen","src","logo","isOpen","onRequestClose","contentLabel","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8e161326.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/running.bda043eb.svg\";","import { Editor as SlateEditor, NodeEntry } from \"slate\";\r\nimport { EditListPlugin } from '@productboard/slate-edit-list';\r\n\r\nconst editListOptions = {\r\n    types: [\"bulleted-list\", \"numbered-list\"],\r\n    typeItem: \"list-item\",\r\n}\r\n\r\nexport const [withEditList, onKeyDown, { Editor, Element, Transforms }] = EditListPlugin(editListOptions);\r\n\r\nexport const indentListItem = (editor: SlateEditor): void => {\r\n    Transforms.increaseItemDepth(editor)\r\n}\r\n\r\nexport const dedentListItem = (editor: SlateEditor): void => {\r\n    Transforms.decreaseItemDepth(editor)\r\n}\r\n\r\nexport const makeListBlock = (editor: SlateEditor, type?: string): void => {\r\n    Transforms.wrapInList(editor, type)\r\n}\r\n\r\nexport const unmakeListBlock = (editor: SlateEditor): void => {\r\n    Transforms.unwrapList(editor)\r\n}\r\n\r\nexport const toggleListBlock = (editor: SlateEditor, type?: string): void => {\r\n    const currentlyInList = Editor.isSelectionInList(editor)\r\n    if (!currentlyInList)\r\n        Transforms.wrapInList(editor, type);\r\n    else {\r\n        // check if the current list is of the same type\r\n        let currentList = Editor.getCurrentList(editor, editor.selection) as NodeEntry;\r\n        console.log(currentList);\r\n        let [currentListNode, currentListPath] = currentList;\r\n        // if not, change it to the other type\r\n        if (type && currentListNode.type !== type) {\r\n            Transforms.setNodes(editor, {type}, {at: currentListPath})\r\n        } else {\r\n            Transforms.unwrapList(editor);\r\n        }\r\n    }\r\n}","import { Editor, Node, NodeEntry, Location, Transforms } from 'slate';\r\n\r\n// utility functions for finding and navigating to template blocks in the editor\r\n// actually they kinda work - if you have more than one block present, it will go two blocks back\r\n// however, it will skip over the nearest block for reasons i can't understand at the moment\r\n// also, selecting the template should not just take you to the block but also allow you to select the options\r\n// TODO: fix the selection issues\r\n\r\nexport const findNextTemplate = (editor: Editor, at?: Location): void => {\r\n    let referencePoint = at || editor.selection!\r\n    // let previousPoint = Editor.before(editor, at || editor.selection!, {unit: \"block\"})\r\n    // console.log(previousPoint, editor.children)\r\n    let nextTemplateNodeEntry = (Editor.next(editor, {\r\n        at: referencePoint,\r\n        match: (node: Node) => node.type === \"template-block\",\r\n        mode: 'lowest',\r\n        voids: true\r\n    }) as NodeEntry)\r\n    // console.log(nextTemplateNodeEntry)\r\n    if (!!nextTemplateNodeEntry) {\r\n        let [,nextTemplatePath] = nextTemplateNodeEntry\r\n        Transforms.select(editor, nextTemplatePath);\r\n    }\r\n}\r\n\r\nexport const findPreviousTemplate = (editor: Editor, at?: Location): void => {\r\n    let referencePoint = at || editor.selection!\r\n    // let nextPoint = Editor.after(editor, at || editor.selection!, {unit: \"block\"})\r\n    // console.log(nextPoint, editor.children)\r\n    let lastTemplateNodeEntry = (Editor.previous(editor, {\r\n        at: referencePoint,\r\n        match: (node: Node) => node.type === \"template-block\",\r\n        mode: 'lowest',\r\n        voids: true\r\n    }) as NodeEntry)\r\n    // console.log(lastTemplateNodeEntry)\r\n    if (!!lastTemplateNodeEntry) {\r\n        let [,lastTemplatePath] = lastTemplateNodeEntry\r\n        Transforms.select(editor, lastTemplatePath)\r\n    }\r\n}","import { Editor, Location } from 'slate';\r\nimport { findNextTemplate, findPreviousTemplate } from './templates';\r\n\r\nexport const HOTKEYS: Record<string, string> = {\r\n    'mod+b': 'bold',\r\n    'mod+i': 'italic',\r\n    'mod+u': 'underline',\r\n}\r\n\r\nexport const BLOCK_HOTKEYS: Record<string, string> = {\r\n    'mod+alt+1': 'heading-one',\r\n    'mod+alt+2': 'heading-two',\r\n    'mod+alt+3': 'heading-three',\r\n    'mod+alt+4': 'heading-four',\r\n    'mod+.': 'bulleted-list',\r\n    'mod+/': 'numbered-list',\r\n}\r\n\r\nexport const TEMPLATE_NAV_HOTKEYS: Record<string, (editor: Editor, at?: Location) => void> = {\r\n    'mod+]': findNextTemplate,\r\n    'mod+[': findPreviousTemplate,\r\n}\r\n\r\nexport const FUNCTION_HOTKEYS: Record<string, (editor: Editor) => void> = {\r\n    'mod+]': findNextTemplate,\r\n    'mod+[': findPreviousTemplate,\r\n}\r\n\r\nexport const LIST_TYPES: string[] = ['numbered-list', 'bulleted-list']","import { Editor, Transforms, Element as SlateElement, Point, Range } from 'slate';\r\nimport { LIST_TYPES } from './consts';\r\n\r\ninterface EditorRangeMatch {\r\n    range: Range | undefined;\r\n    text: string | undefined;\r\n    match: \"\" | RegExpMatchArray | null | undefined;\r\n}\r\n\r\nexport const toggleBlock = (editor: Editor, format: string) => {\r\n    const isActive = isBlockActive(editor, format);\r\n    const isList = LIST_TYPES.includes(format)\r\n\r\n    Transforms.unwrapNodes(editor, {\r\n        match: (n) => !Editor.isEditor(n) && SlateElement.isElement(n) && LIST_TYPES.includes(n.type as string),\r\n        split: true\r\n    })\r\n\r\n    const newProperties: Partial<SlateElement> = {\r\n        type: isActive ? 'paragraph' : isList ? 'list-item' : format,\r\n    }\r\n    Transforms.setNodes(editor, newProperties)\r\n    \r\n    if (!isActive && isList) {\r\n        const block = { type: format, children: [] }\r\n        Transforms.wrapNodes(editor, block)\r\n    }\r\n}\r\n\r\nexport const toggleMark = (editor: Editor, format: string) => {\r\n    const isActive = isMarkActive(editor, format)\r\n\r\n    if (isActive)\r\n        Editor.removeMark(editor, format)\r\n    else\r\n        Editor.addMark(editor, format, true)\r\n}\r\n\r\nexport const isBlockActive = (editor: Editor, format: string) => {\r\n    const [match] = Editor.nodes(editor, {\r\n        match: n => !Editor.isEditor(n) && SlateElement.isElement(n) && n.type === format,\r\n    })\r\n        \r\n    return !!match\r\n}\r\n\r\nexport const isMarkActive = (editor: Editor, format: string) => {\r\n    const marks = Editor.marks(editor);\r\n    return marks ? marks[format] === true : false\r\n}\r\n\r\nexport const matchBefore = (editor: Editor, start: Point, match: RegExp, beforeOpts?: any, end?: Point): EditorRangeMatch => {\r\n    const rangeEnd = end || start;\r\n    const before = Editor.before(editor, start, beforeOpts)\r\n    const beforeRange = before && Editor.range(editor, before, rangeEnd);\r\n    const beforeText = beforeRange && Editor.string(editor, beforeRange);\r\n    const beforeMatch = beforeText && beforeText.match(match);\r\n    return {range: beforeRange, text: beforeText, match: beforeMatch};\r\n}\r\n\r\nexport const matchAfter = (editor: Editor, start: Point, match: RegExp, afterOpts?: any): EditorRangeMatch => {\r\n    const after = Editor.after(editor, start, afterOpts);\r\n    const afterRange = Editor.range(editor, start, after);\r\n    const afterText = Editor.string(editor, afterRange);\r\n    const afterMatch = afterText.match(match);\r\n    return {range: afterRange, text: afterText, match: afterMatch};\r\n}","import { Editor, Node, Text } from 'slate';\r\nimport unified from 'unified';\r\nimport { slateToRemark } from 'remark-slate-transformer';\r\nimport stringify from 'remark-stringify';\r\nimport escapeHTML from \"escape-html\";\r\nimport * as clipboard from \"clipboard-polyfill\";\r\n\r\n// two packages seem to work to this end:\r\n// https://github.com/accordproject/markdown-transform/tree/master/packages/markdown-slate/\r\n// https://github.com/inokawa/remark-slate-transformer\r\n\r\ntype OptionType = {\r\n    label: string,\r\n    value: string\r\n}\r\n\r\nexport const toMarkdown = (editor: Editor): string => {\r\n    const preprocessed = editor.children.map(preprocessMDNode)\r\n    const processor = unified().use(slateToRemark).use(stringify, {bullet: \"-\"})\r\n    const ast = processor.runSync({\r\n        type: \"root\",\r\n        children: preprocessed,\r\n    });\r\n    const text = processor.stringify(ast);\r\n    // i can't figure out how to remove the unnecessary line breaks in the lists using remark's serialiser\r\n    // so i'm going to do it the stupid way using regex\r\n    let textLines = text.split(\"\\n\")\r\n    // convert to a boolean index of where there are list items or not\r\n    // this will miss empty list items - the serialiser only introduces the spaces after the bullet point when there is content in the item\r\n    let matches = textLines.map(s => !!s.match(/^\\s*(-|\\d+\\.)\\s+/g))\r\n    // look for a true/false/true block\r\n    // it's easier if you just convert it to a string and use regex but again this feels very dumb to me for some reason\r\n    let matchString = matches.map(s => s ? 't' : 'f').join('')\r\n    let tftBlocks = matchString.matchAll(/t(ft)+/g)\r\n    let toRemove: number[] = []\r\n    for (let tft of tftBlocks) {\r\n        let [matched] = tft;\r\n        let { index } = tft;\r\n        // i wish there was a way to do this without the filter or the spread operator but js is dumb\r\n        let fPos = [...matched].map((val, idx) => (val === 'f') ? (index!+idx) : -1).filter(val => (val >= 0))\r\n        toRemove = toRemove.concat(fPos)\r\n    }\r\n    let finalLines = textLines.map((val, idx) => (!toRemove.includes(idx)) ? val : null).filter(val => val !== null)\r\n    let fixedText = finalLines.join('\\n')\r\n\r\n    return fixedText;\r\n}\r\n\r\nexport const toClipboardMD = (editor: Editor): void => {\r\n    navigator.clipboard.writeText(toMarkdown(editor)).then(() => {\r\n        window.alert(\"Copied successfully!\")\r\n    }, () => {\r\n        window.alert(\"Copying failed!\")\r\n    })\r\n}\r\n\r\nconst templatesToText = (node: Node): Node => {\r\n    // console.log(node)\r\n    let newNode = {...node};\r\n\r\n    if (newNode.children)\r\n        newNode.children = (newNode.children as Node[]).map(templatesToText)\r\n\r\n    switch (newNode.type) {\r\n        case \"template-block\":\r\n            switch (newNode.templateType) {\r\n                case \"select\":\r\n                    return {text: (newNode.defaultValue ? (newNode.defaultValue as OptionType).value : \"\")}\r\n                case \"multiselect\":\r\n                    // console.table(newNode.defaultValue)\r\n                    return {text: (newNode.defaultValue ? (newNode.defaultValue as OptionType[]).map(opt => opt.value).join(\", \") : \"\")}\r\n                case \"date\":\r\n                    let dateAsString;\r\n                    if (newNode.defaultValue) {\r\n                        let nodeDate = (typeof newNode.defaultValue === \"string\") ? new Date(newNode.defaultValue) : newNode.defaultValue as Date;\r\n                        dateAsString = `${nodeDate.getDate()}/${nodeDate.getMonth() + 1}/${nodeDate.getFullYear()}`\r\n                    }\r\n                    // console.log(dateAsString)\r\n                    return {text: dateAsString ? dateAsString : \"\"}\r\n                default:\r\n                    return {text: \"\"}\r\n            }\r\n        default:\r\n            return newNode\r\n    }\r\n}\r\n\r\nconst preprocessMDNode = (node: Node): Node => {\r\n    let newNode = {...node};\r\n    // preprocess text nodes so that they return the right formatting\r\n    if (Text.isText(newNode)) {\r\n        newNode.strong = newNode.bold\r\n        newNode.emphasis = newNode.italic\r\n    }\r\n\r\n    if (newNode.children)\r\n        newNode.children = (newNode.children as Node[]).map(preprocessMDNode)\r\n\r\n    switch (newNode.type) {\r\n        case \"heading-one\":\r\n            return {...newNode, type: \"heading\", depth: 1}\r\n        case \"heading-two\":\r\n            return {...newNode, type: \"heading\", depth: 2}\r\n        case \"heading-three\":\r\n            return {...newNode, type: \"heading\", depth: 3}\r\n        case \"heading-four\":\r\n            return {...newNode, type: \"heading\", depth: 4}\r\n        case \"numbered-list\":\r\n            return {...newNode, type: \"list\", ordered: true}\r\n        case \"bulleted-list\":\r\n            return {...newNode, type: \"list\", ordered: false}\r\n        case \"list-item\":\r\n            return {...newNode, type: \"listItem\"}\r\n        case \"template-block\":\r\n            return templatesToText(node)\r\n        default:\r\n            return newNode\r\n    }\r\n}\r\n\r\nexport const toHTML = (editor: Editor): string => {\r\n    const preprocessed = editor.children.map(templatesToText)\r\n    return preprocessed.map(nodeToHTML).join('')\r\n}\r\n\r\nconst nodeToHTML = (node: Node): string => {\r\n    if (Text.isText(node)) {\r\n        let nodeText = escapeHTML(node.text)\r\n        \r\n        if (node.bold)\r\n            nodeText = `<strong>${nodeText}</strong>`\r\n\r\n        if (node.italic)\r\n            nodeText = `<em>${nodeText}</em>`\r\n\r\n        if (node.underline)\r\n            nodeText = `<u>${nodeText}</u>`\r\n        \r\n        return nodeText\r\n    }\r\n    \r\n    const children = node.children.map((n: Node) => nodeToHTML(n)).join('')\r\n\r\n    switch (node.type) {\r\n        case \"heading-one\":\r\n            return `<h1>${children}</h1>`\r\n        case \"heading-two\":\r\n            return `<h2>${children}</h2>`\r\n        case \"heading-three\":\r\n            return `<h3>${children}</h3>`\r\n        case \"heading-four\":\r\n            return `<h4>${children}</h4>`\r\n        case \"bulleted-list\":\r\n            return `<ul>${children}</ul>`\r\n        case \"numbered-list\":\r\n            return `<ol>${children}</ol>`\r\n        case \"list-item\":\r\n            return `<li>${children}</li>`\r\n        default:\r\n            return children\r\n    }\r\n}\r\n\r\nexport const toClipboardHTML = (editor: Editor): void => {\r\n    // can't use the new async clipboard API because it doesn't support rich text\r\n    // i normally try to avoid installing packages if i can help it but anyway, here we are\r\n    const item = new clipboard.ClipboardItem({\r\n        \"text/html\": new Blob([toHTML(editor)], {type: \"text/html\"}),\r\n    })\r\n    try {\r\n        clipboard.write([item]);\r\n        window.alert(\"Copied successfully!\")\r\n    } catch (error) {\r\n        window.alert(\"Copying failed!\")\r\n    }\r\n}","export const InitialState = JSON.parse(`[{\"type\":\"heading-one\",\"children\":[{\"text\":\"Welcome to FastDischarge!\",\"bold\":true}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"FastDischarge\",\"bold\":true},{\"text\":\" supports many different types of template blocks:\"}]},{\"type\":\"bulleted-list\",\"children\":[{\"type\":\"list-item\",\"children\":[{\"type\":\"paragraph\",\"children\":[{\"text\":\"Selecting from a list\",\"bold\":true},{\"text\":\" (type in 2 {'s): \"},{\"type\":\"template-block\",\"templateType\":\"select\",\"name\":\"fruits\",\"opts\":[{\"label\":\"apple\",\"value\":\"apple\"},{\"label\":\"orange\",\"value\":\"orange\"},{\"label\":\"pineapple\",\"value\":\"pineapple\"},{\"label\":\"pear\",\"value\":\"pear\"},{\"label\":\"banana\",\"value\":\"banana\"},{\"label\":\"grapefruit\",\"value\":\"grapefruit\"}],\"defaultValue\":{\"label\":\"apple\",\"value\":\"apple\"},\"children\":[{\"text\":\"\"}]},{\"text\":\"\"}]}]},{\"type\":\"list-item\",\"children\":[{\"type\":\"paragraph\",\"children\":[{\"text\":\"Selecting multiple items from a list\",\"bold\":true},{\"text\":\" (type in 2 ['s): \"},{\"type\":\"template-block\",\"templateType\":\"multiselect\",\"name\":\"fruits\",\"opts\":[{\"label\":\"apple\",\"value\":\"apple\"},{\"label\":\"pear\",\"value\":\"pear\"},{\"label\":\"pineapple\",\"value\":\"pineapple\"},{\"label\":\"orange\",\"value\":\"orange\"},{\"label\":\"grapefruit\",\"value\":\"grapefruit\"},{\"label\":\"citronella\",\"value\":\"citronella\"}],\"defaultValue\":[{\"label\":\"pineapple\",\"value\":\"pineapple\"},{\"label\":\"pear\",\"value\":\"pear\"},{\"label\":\"grapefruit\",\"value\":\"grapefruit\"},{\"label\":\"citronella\",\"value\":\"citronella\"}],\"children\":[{\"text\":\"\"}]},{\"text\":\" \"}]}]},{\"type\":\"list-item\",\"children\":[{\"type\":\"paragraph\",\"children\":[{\"text\":\"Selecting a date\",\"bold\":true},{\"text\":\" (type in 2 @'s): \"},{\"type\":\"template-block\",\"templateType\":\"date\",\"name\":\"date\",\"children\":[{\"text\":\"\"}]},{\"text\":\"\"}]}]},{\"type\":\"list-item\",\"children\":[{\"type\":\"paragraph\",\"children\":[{\"text\":\"Setting a void element to be typed over (type in 2 *'s): \"},{\"type\":\"template-block\",\"templateType\":\"void\",\"name\":\"void\",\"children\":[{\"text\":\"\"}]},{\"text\":\"\"}]}]}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Whenever you want to name a field, simply click on the \"},{\"text\":\"gear\",\"italic\":true},{\"text\":\" icon next to each template.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"You can also use the \"},{\"text\":\"tab \",\"italic\":true},{\"text\":\"key to handily move between each template field.\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"If you're coming from PowerChart, FastDischarge also supports dot abbreviations - simply highlight any text and click the dot on the hovering menu, then name your abbreviation. Type in the dot, followed by the name of your abbreviation, and you'll be all set to go!\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"More help can be found in the about menu - just click on the \"},{\"text\":\"?\",\"bold\":true},{\"text\":\" button on the bottom-right. \"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"Happy discharging!\",\"italic\":true}]}]`)","import React, { useCallback, useState } from 'react'\r\nimport { Transforms, Editor } from 'slate';\r\nimport { useSelected, useFocused, useEditor, ReactEditor, RenderElementProps } from 'slate-react';\r\nimport { InlineIcon } from '@iconify/react-with-api';\r\nimport AutoSizeInput from \"react-input-autosize\";\r\n\r\nimport { TemplateBlockProps } from \"../../interfaces/Templates\"\r\n\r\n// base type for all templates\r\n// should have:\r\n// - a gear icon for naming the block\r\n// - an input area, whether that be select, date, link, blank or otherwise\r\n// the point of this is just to be a generic type that can hold whatever arbitrary input you like\r\n// what should the base type provide to the child it contains?\r\n// - onTop and setOnTop\r\n// - name\r\n// - element\r\n// - editor (maybe)\r\n\r\ninterface TemplatePassProps {\r\n    onTop: boolean;\r\n    setOnTop: React.Dispatch<React.SetStateAction<boolean>>;\r\n    name: string;\r\n    editor: Editor;\r\n    changeProps: (props: TemplateBlockProps) => void;\r\n}\r\n\r\nexport interface TemplateBaseProps {\r\n    renderProps: RenderElementProps;\r\n    children: (templateProps: TemplatePassProps) => React.ReactElement;\r\n    tabIndex?: number;\r\n}\r\nexport interface TemplateElementProps {\r\n    renderProps: RenderElementProps;\r\n    templateProps: TemplatePassProps;\r\n}\r\n\r\n// ok this approach clearly isn't working. here's a better idea\r\n// const BaseTemplate = (baseProps: TemplatePassProps) => React.FC<RenderElementProps> \r\n// either way, the only real property needing to be satisfied is that\r\n// the base template can wrap around the template block type and provide it with the TemplatePassProps\r\n// a better way to do this might be to use a higher-order function that returns a slate element compatible component\r\n\r\nexport const BaseTemplate: React.FC<TemplateBaseProps> = ({ renderProps: {attributes, children: renderChildren, element}, children, tabIndex }) => {\r\n    const selected = useSelected();\r\n    const focused = useFocused();\r\n    const editor = useEditor();\r\n    \r\n    const [name, setName] = useState<string>((element.name as string))\r\n    const [editName, setEditName] = useState(false);\r\n    \r\n    const [onTop, setOnTop] = useState(false);\r\n\r\n    const handleNameChange = useCallback((evt: React.FormEvent) => {\r\n        let newName = (evt.target as HTMLInputElement).value\r\n        setName(newName);\r\n        changeProps({name: newName})\r\n        // eslint-disable-next-line\r\n    }, [setName])\r\n    \r\n    const changeProps = useCallback((props: TemplateBlockProps) => {\r\n        let path = ReactEditor.findPath(editor, element)\r\n        let newProps = {...props}\r\n        Transforms.setNodes(editor, newProps, {at:path})\r\n        // eslint-disable-next-line\r\n    }, [element])\r\n    \r\n    // this fix using the onmenuclose and onmenuopen hooks seems to work, but i'm not sure how safe it is\r\n    const defaultStyles: React.CSSProperties = {\r\n        boxShadow: selected && focused ? '0 0 0 2px #b4d5ff' : 'none',\r\n        transform: `translateY(${editName ? 0 : 2}px)`,\r\n        transition: \"0.3s ease all\"\r\n    }\r\n\r\n    const focusedStyles: React.CSSProperties = {\r\n        position: \"relative\",\r\n        zIndex: 99\r\n    }\r\n\r\n    return (\r\n        <span {...attributes}\r\n            className=\"template-block\"\r\n            contentEditable={false}\r\n            tabIndex={tabIndex}\r\n            style={onTop ? {...defaultStyles, ...focusedStyles} : defaultStyles}>\r\n            {editName ?\r\n            (\r\n                <div className=\"content\">\r\n                    <AutoSizeInput placeholder=\"Name this field...\" value={name} onInput={handleNameChange} onKeyDown={e => e.key === \"Enter\" && setEditName(!editName)} />\r\n                </div>\r\n            )\r\n            : children({onTop, setOnTop, name, editor, changeProps})}\r\n            <button className=\"name-setter\"\r\n                onClick={() => {\r\n                    setEditName(!editName)\r\n                }}\r\n                tabIndex={-1}\r\n            ><InlineIcon icon=\"bi:gear-fill\" /></button>\r\n            {renderChildren}\r\n        </span>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Editor, Transforms } from 'slate';\r\nimport { RenderElementProps } from 'slate-react';\r\n\r\nimport { BaseTemplate } from './BaseTemplate';\r\nimport { TemplateBlockProps } from './../../interfaces/Templates';\r\n\r\n\r\n// generic void template similar to wildcards in EPIC or PowerChart, only purpose is to be overtyped\r\n\r\nexport const VoidTemplate: React.FC<RenderElementProps> = ({ attributes, element, children }) => {\r\n    return (\r\n        <BaseTemplate renderProps={{attributes, element, children}} tabIndex={0}>\r\n            {({ name }) => <>{name}</>}\r\n        </BaseTemplate>\r\n    )\r\n}\r\n\r\nexport const insertVoidTemplateBlock = (editor: Editor, {name}: TemplateBlockProps) => {\r\n    const templateBlock = { type: \"template-block\", templateType: \"void\", name, children: [{text: ''}] }\r\n    Transforms.insertNodes(editor, templateBlock);\r\n    Transforms.move(editor);\r\n}","import React, { useCallback, useRef, useState } from 'react'\r\nimport CreatableSelect from 'react-select/creatable'\r\nimport { ValueType } from 'react-select';\r\nimport { Editor, Transforms } from 'slate';\r\nimport { RenderElementProps } from 'slate-react';\r\n\r\nimport { BaseTemplate } from './BaseTemplate';\r\nimport { TemplateBlockProps } from '../../interfaces/Templates';\r\n\r\n// this template should be an inline editable element that also allows you to:\r\n// - set options\r\n// - expand to arbitrary slate json\r\n// insert using {{\r\ntype OptionType = {\r\n    label: string,\r\n    value: string\r\n}\r\n\r\n// TODO: add the ability to set the options while the template block is focused/selected\r\nexport const ListTemplate: React.FC<RenderElementProps> = ({ attributes, element, children }) => {\r\n    const isMulti = element.templateType === \"multiselect\"\r\n    const [chosenValue, setChosenValue] = useState<ValueType<OptionType,false>|ValueType<OptionType,false>[]>(element.defaultValue ? (element.defaultValue as {label:string,value:string}) : null as ValueType<{label:string,value:string}, false>);\r\n    const [options, setOptions] = useState<OptionType[]>(element.opts ? element.opts as OptionType[] : [])\r\n    const selectRef = useRef<any>(null);\r\n\r\n    const handleChange = useCallback((newValue: any, actionMeta: any, changeProps: (props: TemplateBlockProps) => void) => {\r\n        setChosenValue(newValue);\r\n        changeProps({defaultValue: newValue})\r\n        // eslint-disable-next-line\r\n    }, [setChosenValue])\r\n    \r\n    const handleCreate = (inputValue: any, changeProps: (props: TemplateBlockProps) => void) => {\r\n        const newOption = createOption(inputValue);\r\n        const newSetOption = isMulti ? [...((element.defaultValue ? element.defaultValue : []) as OptionType[]), newOption] : newOption\r\n        setOptions([...options, newOption])\r\n        setChosenValue(newSetOption);\r\n        changeProps({opts: [...options, newOption], defaultValue: newSetOption})\r\n    }\r\n\r\n    return (\r\n        <BaseTemplate renderProps={{attributes, element, children}}>\r\n            {\r\n            ({ name, setOnTop: setMenuOpen, changeProps }) =>\r\n            (<CreatableSelect isMulti={isMulti}\r\n                ref={selectRef}\r\n                styles={customSelectStyles} theme={customSelectTheme}\r\n                placeholder={name}\r\n                onChange={(newValue: any, actionMeta: any) => handleChange(newValue, actionMeta, changeProps)}\r\n                onCreateOption={(inputValue: any) => handleCreate(inputValue, changeProps)}\r\n                onMenuOpen={() => setMenuOpen(true)} onMenuClose={() => setMenuOpen(false)}\r\n                value={chosenValue} options={options} />)\r\n            }\r\n        </BaseTemplate>\r\n    )\r\n}\r\n\r\nexport const insertListTemplateBlock = (editor: Editor, {name, opts, defaultValue}: TemplateBlockProps, isMulti?: boolean) => {\r\n    const templateBlock = { type: \"template-block\", templateType: `${isMulti ? \"multiselect\" : \"select\"}`, name, opts, defaultValue, children: [{text: ''}] }\r\n    Transforms.insertNodes(editor, templateBlock);\r\n    Transforms.move(editor);\r\n}\r\n\r\nconst createOption = (label: string) => ({\r\n    label,\r\n    value: label\r\n})\r\n\r\n// auto width: https://stackoverflow.com/questions/46571811/react-select-auto-size-width\r\n// modify height: https://stackoverflow.com/questions/54218351/changing-height-of-react-select-component\r\nconst customSelectStyles = {\r\n    control: (provided: any, state: any) => ({\r\n        ...provided,\r\n        minHeight: \"1.4em\",\r\n        height: \"1.4em\",\r\n        paddingTop: \"1px\",\r\n    }),\r\n    valueContainer: (provided: any, state: any) => {\r\n        // this doesn't work for multis so should be something else if multi\r\n        let { isMulti } = state;\r\n        let currentOptions = (state.getValue() as OptionType[]);\r\n        let optionsLength = currentOptions.map(opt => opt.label.length).reduce((a,b) => a+b+(isMulti ? 3 : 2), 0) - 2\r\n        return ({\r\n            ...provided,\r\n            margin: \"0 0 0 4px\",\r\n            transform: \"translateY(-2px)\",\r\n            width: `${(currentOptions.length > 0 ? optionsLength :\r\n                state.selectProps.placeholder ? state.selectProps.placeholder.length : 5) + 2}ex`,\r\n            minWidth: \"5ex\",\r\n        })\r\n    },\r\n    input: (provided: any, state: any) => ({\r\n        ...provided,\r\n        margin: \"0px\",\r\n    }),\r\n    indicatorSeparator: (state: any) => ({\r\n        display: 'none',\r\n    }),\r\n    indicatorsContainer: (provided: any, state: any) => ({\r\n        ...provided,\r\n        height: '1.4em',\r\n        transform: \"translateY(-2px)\"\r\n    }),\r\n    menu: (provided: any, state: any) => ({\r\n        ...provided,\r\n        marginTop: 0,\r\n        zIndex: `${state.selectProps.menuIsOpen ? 999 : \"inherit\"}`\r\n    }),\r\n    multiValue: (provided: any, state: any) => ({\r\n        ...provided,\r\n        marginRight: \"3px\",\r\n    }),\r\n    multiValueLabel: (provided: any) => ({\r\n        ...provided,\r\n        padding: 0,\r\n    }),\r\n    option: (provided: any) => ({\r\n        ...provided,\r\n        padding: \"5px\",\r\n    }),\r\n    noOptionsMessage: (provided: any) => ({\r\n        ...provided,\r\n        padding: \"5px 0\",\r\n    }),\r\n}\r\n\r\nconst customSelectTheme = (theme: any) => ({\r\n    ...theme,\r\n    borderRadius: 0,\r\n    spacing: {\r\n        ...theme.spacing,\r\n        baseUnit: 0,\r\n    },\r\n})","import React, { useState } from 'react'\r\nimport { Editor, Transforms } from \"slate\";\r\nimport { RenderElementProps } from 'slate-react'\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nimport { BaseTemplate } from './BaseTemplate';\r\nimport { TemplateBlockProps } from './../../interfaces/Templates';\r\n\r\n// should be a span with a button that allows you to pick a date. insert using @@\r\n\r\nexport const DateTemplate: React.FC<RenderElementProps> = ({ attributes, children, element }) => {\r\n    let safeDate;\r\n    if (element.defaultValue instanceof Date) {\r\n        safeDate = element.defaultValue\r\n    } else if (typeof element.defaultValue === \"string\") {\r\n        safeDate = new Date(element.defaultValue);\r\n    }\r\n    const [chosenDate, setChosenDate] = useState(safeDate || new Date());\r\n\r\n    const modifyDate = (date: Date, changeProps: (props: TemplateBlockProps) => void) => {\r\n        setChosenDate(date);\r\n        changeProps({defaultValue: date})\r\n    }\r\n\r\n    return (\r\n        <BaseTemplate renderProps={{attributes, element, children}}>\r\n            {({ name, changeProps }) => \r\n                <DatePicker todayButton=\"Today\" selected={chosenDate} onChange={(date: Date) => modifyDate(date, changeProps)}\r\n                    isClearable placeholderText={name} dateFormat=\"dd/MM/yyyy\" />\r\n            }\r\n        </BaseTemplate>\r\n    )\r\n}\r\n\r\nexport const insertDateTemplateBlock = (editor: Editor, {name}: TemplateBlockProps) => {\r\n    const templateBlock = { type: \"template-block\", templateType: \"date\", name, children: [{text: ''}] }\r\n    Transforms.insertNodes(editor, templateBlock);\r\n    Transforms.move(editor);\r\n}","import React from 'react'\r\nimport { RenderElementProps } from \"slate-react\";\r\nimport { VoidTemplate } from '../template-types/VoidTemplate';\r\nimport { ListTemplate } from './../template-types/ListTemplate';\r\nimport { DateTemplate } from './../template-types/DateTemplate';\r\n\r\nexport const Element: React.FC<RenderElementProps> = ({ attributes, children, element }) => {\r\n    switch (element.type) {\r\n        case 'bulleted-list':\r\n            return <ul {...attributes}>{children}</ul>\r\n        case 'numbered-list':\r\n            return <ol {...attributes}>{children}</ol>\r\n        case 'heading-one':\r\n            return <h1 {...attributes}>{children}</h1>\r\n        case 'heading-two':\r\n            return <h2 {...attributes}>{children}</h2>\r\n        case 'heading-three':\r\n            return <h3 {...attributes}>{children}</h3>\r\n        case 'heading-four':\r\n            return <h4 {...attributes}>{children}</h4>\r\n        case 'list-item':\r\n            return <li {...attributes}>{children}</li>\r\n        case 'template-block':\r\n            switch (element.templateType) {\r\n                case \"select\":\r\n                    return <ListTemplate attributes={attributes} element={element}>{children}</ListTemplate>\r\n                case \"multiselect\":\r\n                    return <ListTemplate attributes={attributes} element={element}>{children}</ListTemplate>\r\n                case \"void\":\r\n                    return <VoidTemplate attributes={attributes} element={element}>{children}</VoidTemplate>\r\n                case \"date\":\r\n                    return <DateTemplate attributes={attributes} element={element}>{children}</DateTemplate>\r\n                default:\r\n                    return <VoidTemplate attributes={attributes} element={element}>{children}</VoidTemplate>\r\n            }\r\n        default:\r\n            return <p {...attributes}>{children}</p>\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { RenderLeafProps } from 'slate-react'\r\n\r\nexport const Leaf: React.FC<RenderLeafProps> = ({ attributes, children, leaf }) => {\r\n    if (leaf.bold)\r\n        children = <strong>{children}</strong>\r\n        \r\n    if (leaf.code)\r\n        children = <code>{children}</code>\r\n\r\n    if (leaf.italic)\r\n        children = <em>{children}</em>\r\n\r\n    if (leaf.underline)\r\n        children = <u>{children}</u>\r\n        \r\n    if (leaf.pretemplate)\r\n        children = <span style={{borderRadius: \"5px\", backgroundColor: \"#ddd\"}}>{children}</span>\r\n        \r\n    return <span {...attributes}>{children}</span>\r\n}\r\n","import React from 'react';\r\nimport { InlineIcon } from \"@iconify/react-with-api\";\r\nimport { useSlate } from 'slate-react';\r\nimport { isMarkActive, toggleMark } from '../../editor/utils';\r\n\r\ninterface Props {\r\n    format: string;\r\n    icon: string;\r\n    alt?: string;\r\n}\r\n\r\nexport const MarkButton: React.FC<Props> = ({ format, icon, alt }) => {\r\n    const editor = useSlate();\r\n    const isActive = isMarkActive(editor, format);\r\n\r\n    return (\r\n        <li>\r\n            <button className={isActive ? \"active\" : \"\"}\r\n                onMouseDown={evt => {\r\n                evt.preventDefault();\r\n                toggleMark(editor, format)\r\n            }} title={alt}>\r\n                <InlineIcon icon={icon} />\r\n            </button>\r\n        </li>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { InlineIcon } from \"@iconify/react-with-api\";\r\nimport { useSlate } from 'slate-react';\r\nimport { toggleBlock, isBlockActive } from '../../editor/utils';\r\n\r\ninterface Props {\r\n    format: string;\r\n    icon: string;\r\n    alt?: string;\r\n}\r\n\r\nexport const BlockButton: React.FC<Props> = ({ format, icon, alt }) => {\r\n    const editor = useSlate();\r\n    const isActive = isBlockActive(editor, format);\r\n\r\n    return (\r\n        <li>\r\n            <button className={isActive ? \"active\" : \"\"}\r\n                onMouseDown={evt => {\r\n                evt.preventDefault();\r\n                toggleBlock(editor, format)\r\n            }} title={alt}>\r\n                <InlineIcon icon={icon} />\r\n            </button>\r\n        </li>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { InlineIcon } from \"@iconify/react-with-api\";\r\nimport { Editor as SlateEditor } from \"slate\";\r\nimport { useSlate } from 'slate-react';\r\nimport { Editor, toggleListBlock } from '../../editor/lists';\r\n\r\ninterface Props {\r\n    format: string;\r\n    icon: string;\r\n    alt?: string;\r\n}\r\n\r\nexport const ListButton: React.FC<Props> = ({ format, icon, alt }) => {\r\n    const editor = useSlate();\r\n    const isActive = checkActive(editor, format);\r\n\r\n    return (\r\n        <li>\r\n            <button className={isActive ? \"active\" : \"\"}\r\n                onMouseDown={evt => {\r\n                evt.preventDefault();\r\n                toggleListBlock(editor, format)\r\n            }} title={alt}>\r\n                <InlineIcon icon={icon} />\r\n            </button>\r\n        </li>\r\n    )\r\n}\r\n\r\nconst checkActive = (editor: SlateEditor, format: string) => {\r\n    const currentList = Editor.getCurrentList(editor);\r\n    if (currentList) {\r\n        const [listNode] = currentList;\r\n        return listNode.type === format;\r\n    }\r\n}","import React from 'react'\r\n\r\nexport const Toolbar: React.FC = ({ children }) => {\r\n    return (\r\n        <div className=\"toolbar-container\">\r\n            <ul>\r\n                {children}\r\n            </ul>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport { InlineIcon } from '@iconify/react-with-api';\r\nimport { Editor } from 'slate'\r\nimport { useSlate } from 'slate-react';\r\n\r\ninterface Props {\r\n    fn: (editor: Editor) => void;\r\n    icon: string;\r\n    alt?: string;\r\n}\r\n\r\nexport const FunctionButton: React.FC<Props> = ({fn, icon, alt}) => {\r\n    const editor = useSlate();\r\n    \r\n    return (\r\n        <li>\r\n            <button onMouseDown={evt => {\r\n                evt.preventDefault();\r\n                fn(editor)\r\n            }} title={alt}>\r\n                <InlineIcon icon={icon} />\r\n            </button>\r\n        </li>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom';\r\n\r\nexport const Portal: React.FC = ({ children }) => {\r\n    return ReactDOM.createPortal(children, document.body);\r\n}\r\n","import { atom } from \"recoil\";\r\nimport { Descendant } from \"slate\";\r\n\r\nconst existingAbbrevs = localStorage.getItem(\"dotAbbrevs\")\r\n\r\nexport const DotAbbrevsState = atom({\r\n    key: \"DotAbbreviations\",\r\n    default: existingAbbrevs ? (JSON.parse(existingAbbrevs) as Record<string, Descendant[]>) : ({} as Record<string, Descendant[]>)\r\n})","import React, { useEffect, useRef } from 'react'\r\nimport { Descendant, Editor, Range } from 'slate';\r\nimport { ReactEditor, useSlate } from 'slate-react';\r\nimport { Portal } from './utils/Portal';\r\nimport { FunctionButton } from './buttons/FunctionButton';\r\nimport { SetterOrUpdater, useSetRecoilState } from 'recoil';\r\nimport { DotAbbrevsState } from './../context/DotAbbrevs';\r\n\r\n// based on this example:\r\n// https://github.com/ianstormtaylor/slate/blob/master/site/examples/hovering-toolbar.tsx\r\n\r\n// this menu should give users the ability to select a chunk of text to save as a dot abbreviation\r\n\r\nexport const HoverMenu: React.FC = () => {\r\n    const ref = useRef<HTMLDivElement | null>(null);\r\n    const editor = useSlate();\r\n    const setDotAbbrevs = useSetRecoilState(DotAbbrevsState);\r\n\r\n    useEffect(() => {\r\n        const el = ref.current;\r\n        const { selection } = editor;\r\n\r\n        if (!el) {\r\n            return;\r\n        }\r\n\r\n        if (!selection || !ReactEditor.isFocused(editor) || Range.isCollapsed(selection) || Editor.string(editor, selection) === \"\") {\r\n            el.removeAttribute('style');\r\n            return;\r\n        }\r\n\r\n        const domSelection = window.getSelection();\r\n        const domRange = domSelection?.getRangeAt(0);\r\n        const rect = domRange?.getBoundingClientRect();\r\n\r\n        el.style.opacity = '1';\r\n        el.style.top = `${rect!.top + window.pageYOffset - el.offsetHeight}px`;\r\n        el.style.left = `${rect!.left + window.pageXOffset - el.offsetWidth/2 + 15}px`;\r\n    })\r\n\r\n    return (\r\n        <Portal>\r\n            <div className=\"hovering-menubar\" ref={ref}>\r\n                <ul>\r\n                    <FunctionButton fn={() => saveDotAbbrev(editor, setDotAbbrevs)} icon=\"bi:dot\" alt=\"Save as a dot abbreviation\" />\r\n                </ul>\r\n            </div>\r\n        </Portal>\r\n    )\r\n}\r\n\r\nfunction saveDotAbbrev(editor: Editor, abbrevSetter: SetterOrUpdater<any>) {\r\n    const { selection } = editor;\r\n    const existingAbbrevs = localStorage.getItem(\"dotAbbrevs\") && JSON.parse(localStorage.getItem(\"dotAbbrevs\")!)\r\n    // get the fragment\r\n    let fragment = Editor.fragment(editor, selection!)\r\n    // first a dialogue should pop up asking the user to name the fragment\r\n    let fragmentName = window.prompt(\"Name this fragment: \")\r\n    let fragmentObject: Record<string,Descendant[]> = {}\r\n    fragmentObject[fragmentName!] = fragment;\r\n    let newAbbrevs;\r\n    if (existingAbbrevs) {\r\n        newAbbrevs = {...existingAbbrevs, ...fragmentObject}\r\n    } else {\r\n        newAbbrevs = {...fragmentObject}\r\n    }\r\n    abbrevSetter(newAbbrevs);\r\n    localStorage.setItem(\"dotAbbrevs\", JSON.stringify(newAbbrevs))\r\n}","import React from 'react'\r\nimport { Portal } from './utils/Portal';\r\n\r\n// based on this example:\r\n// https://github.com/ianstormtaylor/slate/blob/master/site/examples/mentions.tsx\r\n\r\n// this will mainly be used for dot abbreviation expansion\r\n\r\ninterface Props {\r\n    opts: string[];\r\n    pos: number;\r\n}\r\n\r\ninterface SelectItemProps {\r\n    key: any;\r\n    active: boolean;\r\n}\r\n\r\nexport const HoverList = React.forwardRef<HTMLDivElement, Props>(({ opts, pos }: Props, ref) => {\r\n    return (\r\n        <Portal>\r\n            <div className=\"abbreviation-selector\" ref={ref}>\r\n                {opts.map((opt, i) => (\r\n                    <SelectItem key={opt} active={pos === i}>\r\n                        {opt}\r\n                    </SelectItem>\r\n                ))\r\n                }\r\n            </div>\r\n        </Portal>\r\n    )\r\n})\r\n\r\n// The point of making this a separate component is that hopefully it'll be able to support onClick events\r\nconst SelectItem: React.FC<SelectItemProps> = ({ active, children }) => {\r\n    return (\r\n        <div className={`selector-item ${active ? \"active-item\" : \"\"}`}>\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n","\r\nexport function downloadFile(fileCreator: Blob | (() => Blob), fileName: string): void {\r\n    const blob = (typeof fileCreator === \"function\") ? fileCreator() : fileCreator;\r\n    const fileDownloadURL = URL.createObjectURL(blob);\r\n    let tempLink = document.createElement(\"a\")\r\n    tempLink.href = fileDownloadURL;\r\n    tempLink.setAttribute(\"download\", fileName)\r\n    tempLink.setAttribute(\"target\", \"_blank\")\r\n    tempLink.click()\r\n    tempLink.remove()\r\n}\r\n\r\nexport function uploadSingleFile(uploadHandler: (file: File, fr: FileReader) => void): void {\r\n    const fileSelector = document.createElement(\"input\");\r\n    fileSelector.setAttribute(\"type\", \"file\")\r\n    fileSelector.click()\r\n    fileSelector.addEventListener(\"change\", event => {\r\n        if (fileSelector.files && fileSelector.files.length >= 1) {\r\n            let file = fileSelector.files![0], fr = new FileReader();\r\n            uploadHandler(file, fr)\r\n        }\r\n    })\r\n}","import React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { Editable, withReact, Slate, ReactEditor } from \"slate-react\";\r\nimport { createEditor, Editor, Location, Node, Range, Transforms } from \"slate\";\r\nimport { withHistory } from \"slate-history\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport \"simplebar/dist/simplebar.min.css\"\r\n\r\nimport { withEditList, onKeyDown as listKeyDown, indentListItem, dedentListItem } from \"./../editor/lists\"\r\nimport { hotkeyHandler } from '../editor/handlers'\r\nimport { toClipboardHTML, toClipboardMD } from \"../editor/seralise\";\r\nimport { withVoids } from './../wraps/VoidBlocks';\r\nimport { insertTemplateBlock } from \"./TemplateBlock\";\r\nimport { InitialState } from \"./../context/InitialState\";\r\n\r\nimport { Element } from './utils/Element';\r\nimport { Leaf } from './utils/Leaf';\r\nimport { MarkButton } from \"./buttons/MarkButton\";\r\nimport { BlockButton } from \"./buttons/BlockButton\";\r\nimport { ListButton } from \"./buttons/ListButton\";\r\nimport { Toolbar } from './Toolbar'\r\nimport { FunctionButton } from \"./buttons/FunctionButton\";\r\nimport { HoverMenu } from \"./HoverMenu\";\r\nimport { matchAfter, matchBefore } from './../editor/utils';\r\nimport { DotAbbrevsState } from './../context/DotAbbrevs';\r\nimport { HoverList } from './HoverList';\r\nimport { downloadFile, uploadSingleFile } from './../utils/fileHandling';\r\nimport { insertListTemplateBlock } from \"./template-types/ListTemplate\";\r\nimport { insertDateTemplateBlock } from \"./template-types/DateTemplate\";\r\nimport { insertVoidTemplateBlock } from \"./template-types/VoidTemplate\";\r\n\r\nexport const RichTextEditor: React.FC = () => {\r\n    const searchRef = useRef<HTMLDivElement | null>(null);\r\n    const [value, setValue] = useState<Node[]>(JSON.parse((localStorage.getItem(\"content\") as string)) || InitialState);\r\n    const [target, setTarget] = useState<Range | null>();\r\n    const [fragmentTarget, setFragmentTarget] = useState<Range | null>();\r\n    const [index, setIndex] = useState(0);\r\n    const [search, setSearch] = useState(\"\");\r\n    const [replaceText, setReplaceText] = useState(\"\");\r\n    const [abbrevs, setAbbrevs] = useRecoilState(DotAbbrevsState);\r\n    const [insertTemplate, setInsertTemplate] = useState(false);\r\n    const renderElement = useCallback(props => <Element {...props} />, [])\r\n    const renderLeaf = useCallback(props => <Leaf {...props} />, [])\r\n\r\n    const editor = useMemo(() => withHistory(withReact(withEditList(withVoids(createEditor())))), [])\r\n    \r\n    const searchedAbbrevs = Object.fromEntries(Object.entries(abbrevs).filter(([key]) => \r\n        (search !== \"$\") ? key.toLowerCase().startsWith(search.toLowerCase()) : !!key\r\n    ));\r\n\r\n    // useEffect hook for inserting template tags\r\n    useEffect(() => {\r\n        if (!!target && insertTemplate) {\r\n            Transforms.select(editor, target!);\r\n            switch (replaceText) {\r\n                case \"{{\":\r\n                    insertListTemplateBlock(editor, {})\r\n                    break;\r\n                case \"[[\":\r\n                    insertListTemplateBlock(editor, {}, true)\r\n                    break;\r\n                case \"@@\":\r\n                    insertDateTemplateBlock(editor, {})\r\n                    break;\r\n                case \"**\":\r\n                    insertVoidTemplateBlock(editor, {})\r\n                    break;\r\n            }\r\n            setInsertTemplate(false);\r\n            setTarget(null);\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [insertTemplate])\r\n    \r\n    // useEffect hook for fragment insertion dropdowns\r\n    useEffect(() => {\r\n        if (fragmentTarget && Object.keys(searchedAbbrevs).length > 0) {\r\n            // console.log(\"Dotabbrev searcher should display\")\r\n            // console.log(search, searchedAbbrevs)\r\n            const el = searchRef.current;\r\n            const domRange = ReactEditor.toDOMRange(editor, fragmentTarget);\r\n            const rect = domRange.getBoundingClientRect();\r\n            el!.style.top = `${rect.top + window.pageYOffset + 24}px`\r\n            el!.style.left = `${rect.left + window.pageXOffset}px`\r\n        }\r\n    }, [searchedAbbrevs, editor, index, search, fragmentTarget])\r\n    \r\n    const exportTemplateAsFile = () => downloadFile(new Blob([JSON.stringify(editor.children)], {type: \"application/json\"}), \"template.fdt\")\r\n    \r\n    const exportAbbrevsAsFile = () => downloadFile(new Blob([JSON.stringify(abbrevs)], {type: \"application/json\"}), \"abbreviations.fda\")\r\n\r\n    const loadTemplateFromFile = () => uploadSingleFile((file, fr) => {\r\n        fr.readAsText(file);\r\n        fr.onload = event => {\r\n            let loaded = JSON.parse((event.target!.result as string));\r\n            setValue(loaded);\r\n        }\r\n    })\r\n    \r\n    const loadAbbrevsFromFile = () => uploadSingleFile((file, fr) => {\r\n        fr.readAsText(file);\r\n        fr.onload = event => {\r\n            let loaded = JSON.parse((event.target!.result as string));\r\n            setAbbrevs(loaded);\r\n        }\r\n    })\r\n    \r\n    // fragment insertion keydown handler\r\n    const onKeyDown = useCallback(\r\n        (event: React.KeyboardEvent) => {\r\n            if (fragmentTarget) {\r\n                switch (event.key) {\r\n                    case \"ArrowDown\":\r\n                        event.preventDefault();\r\n                        const prevIndex = index >= Object.keys(searchedAbbrevs).length - 1 ? 0 : index + 1\r\n                        setIndex(prevIndex);\r\n                        break;\r\n                    case \"ArrowUp\":\r\n                        event.preventDefault();\r\n                        const nextIndex = index <= 0 ? Object.keys(searchedAbbrevs).length - 1 : index - 1\r\n                        setIndex(nextIndex);\r\n                        break;\r\n                    case \"Tab\":\r\n                    case \"Enter\":\r\n                        event.preventDefault();\r\n                        Transforms.select(editor, (fragmentTarget as Location));\r\n                        let keyToGet = Object.keys(searchedAbbrevs)[index]\r\n                        let fragmentToInsert = abbrevs[keyToGet]\r\n                        Editor.insertFragment(editor, fragmentToInsert);\r\n                        setFragmentTarget(null);\r\n                        break;\r\n                    case \"Escape\":\r\n                        event.preventDefault();\r\n                        setFragmentTarget(null);\r\n                        break;\r\n                }\r\n            }\r\n        },\r\n        [index, search, fragmentTarget],\r\n    )\r\n    \r\n    return (\r\n        <Slate editor={editor} value={value} onChange={value => {\r\n            setValue(value);\r\n            const content = JSON.stringify(value);\r\n            localStorage.setItem(\"content\", content)\r\n            // console.log(value)\r\n\r\n            // you should be able to replace this code block with this addon:\r\n            // https://github.com/ianstormtaylor/slate-plugins/tree/master/packages/slate-auto-replace\r\n            const { selection } = editor;\r\n            // if nothing is currently selected under the cursor\r\n            if (selection && Range.isCollapsed(selection)) {\r\n                const [start] = Range.edges(selection);\r\n                // if the two characters beforce the cursor are {{, select them and replace with a template block\r\n                const wordBefore = Editor.before(editor, start, {unit: \"word\"})\r\n                const wordBeforeMatch = wordBefore && matchBefore(editor, wordBefore, /^\\.(\\w+|\\$)$/, {}, start)\r\n                let beforeWordRange, beforeWordText, beforeWordMatch;\r\n                if (wordBeforeMatch) {\r\n                    beforeWordRange = wordBeforeMatch.range;\r\n                    beforeWordText = wordBeforeMatch.text;\r\n                    beforeWordMatch = wordBeforeMatch.match;\r\n                }\r\n                // let {range: beforeWordRange, text: beforeWordText, match: beforeWordMatch} = wordBeforeMatch;\r\n                const {match: afterMatch} = matchAfter(editor, start, /^(\\s|$)/)\r\n                const {range: beforeTwoCharsRange, match: beforeTwoCharsMatch, text: beforeTwoCharsText} = matchBefore(editor, start, /\\{\\{|\\[\\[|@@|\\*\\*/, {distance: 2})\r\n                // console.log(beforeWordMatch, beforeWordText, beforeWordRange)\r\n                if (beforeTwoCharsMatch) {\r\n                    setTarget(beforeTwoCharsRange);\r\n                    setReplaceText(beforeTwoCharsText!);\r\n                    setInsertTemplate(true);\r\n                }\r\n                if (beforeWordMatch && afterMatch) {\r\n                    setFragmentTarget(beforeWordRange)\r\n                    setSearch(beforeWordMatch[1]);\r\n                    setIndex(0);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            setFragmentTarget(null);\r\n        }}>\r\n            <Toolbar>\r\n                <MarkButton format=\"bold\" icon=\"gridicons:bold\" alt=\"Bold (Ctrl+B)\" />\r\n                <MarkButton format=\"italic\" icon=\"gridicons:italic\" alt=\"Italic (Ctrl+I)\" />\r\n                <MarkButton format=\"underline\" icon=\"gridicons:underline\" alt=\"Underline (Ctrl+U)\" />\r\n                <BlockButton format=\"heading-one\" icon=\"gridicons:heading-h1\" alt=\"Heading 1 (Ctrl+Alt+1)\" />\r\n                <BlockButton format=\"heading-two\" icon=\"gridicons:heading-h2\" alt=\"Heading 2 (Ctrl+Alt+2)\" />\r\n                <BlockButton format=\"heading-three\" icon=\"gridicons:heading-h3\" alt=\"Heading 3 (Ctrl+Alt+3)\" />\r\n                <BlockButton format=\"heading-four\" icon=\"gridicons:heading-h4\" alt=\"Heading 4 (Ctrl+Alt+4)\" />\r\n                <ListButton format=\"bulleted-list\" icon=\"ic:baseline-format-list-bulleted\" alt=\"Bulleted list (Ctrl+.)\" />\r\n                <ListButton format=\"numbered-list\" icon=\"ic:baseline-format-list-numbered\" alt=\"Numbered list (Ctrl+/)\" />\r\n                <FunctionButton fn={indentListItem} icon=\"bx:bx-right-indent\" alt=\"Indent list item (Tab)\" />\r\n                <FunctionButton fn={dedentListItem} icon=\"bx:bx-left-indent\" alt=\"Dedent list item (Shift-Tab)\" />\r\n                <FunctionButton fn={toClipboardMD} icon=\"ion:copy-outline\" alt=\"Copy to clipboard as plain text (Markdown)\" />\r\n                <FunctionButton fn={toClipboardHTML} icon=\"ion:copy\" alt=\"Copy to clipboard as rich text\" />\r\n                <FunctionButton fn={exportTemplateAsFile} icon=\"bx:bxs-download\" alt=\"Save current template/contents as file\" />\r\n                <FunctionButton fn={loadTemplateFromFile} icon=\"ic:baseline-file-upload\" alt=\"Open a template/document from a file\" />\r\n                <FunctionButton fn={exportAbbrevsAsFile} icon=\"bx:bxs-save\" alt=\"Save your abbreviations into a file\" />\r\n                <FunctionButton fn={loadAbbrevsFromFile} icon=\"bi:cloud-upload\" alt=\"Load your abbreviations from a file\" />\r\n            </Toolbar>\r\n            <HoverMenu />\r\n            <SimpleBar className=\"editor\">\r\n                <Editable\r\n                    renderElement={renderElement}\r\n                    renderLeaf={renderLeaf}\r\n                    placeholder=\"Enter some text...\"\r\n                    spellCheck\r\n                    autoFocus\r\n                    onKeyDown={e => {\r\n                        // console.log(Editor.node(editor, editor.selection))\r\n                        onKeyDown(e);\r\n                        listKeyDown(editor)(e);\r\n                        hotkeyHandler(e, editor);\r\n                    }}\r\n                    onSelect={e => {\r\n                        // thanks:\r\n                        // https://github.com/ianstormtaylor/slate/issues/3750\r\n                        if (!(window as any).chrome)\r\n                            return\r\n                        if (editor.selection == null)\r\n                            return\r\n                        \r\n                        try {\r\n                            const domPoint = ReactEditor.toDOMPoint(\r\n                                editor,\r\n                                editor.selection.focus\r\n                            )\r\n                            const node = domPoint[0];\r\n                            if (node == null) return;\r\n                            const element = node.parentElement;\r\n                            if (element == null) return;\r\n                            element.scrollIntoView({behavior: \"smooth\", block: 'nearest'})\r\n                        } catch (e) {\r\n\r\n                        }\r\n                    }}\r\n                />\r\n            </SimpleBar>\r\n            {fragmentTarget && Object.keys(searchedAbbrevs).length > 0 && (\r\n                <HoverList opts={Object.keys(searchedAbbrevs)} pos={index} ref={searchRef} />\r\n            )}\r\n        </Slate>\r\n    )\r\n}\r\n","import { Editor, Element as SlateElement } from \"slate\";\r\n\r\nexport const withVoids = (editor: Editor): Editor => {\r\n    const { isInline, isVoid } = editor;\r\n    const voidElementNames = [\"template-block\"]\r\n\r\n    editor.isInline = (element: SlateElement) => {\r\n        let elemType = element.type as string;\r\n        return voidElementNames.includes(elemType) ? true : isInline(element);\r\n    }\r\n\r\n    editor.isVoid = (element: SlateElement) => {\r\n        let elemType = element.type as string;\r\n        return voidElementNames.includes(elemType) ? true : isVoid(element);\r\n    }\r\n    \r\n    return editor;\r\n}","import { Editor } from 'slate';\r\nimport { isHotkey } from 'is-hotkey';\r\n\r\nimport { HOTKEYS, BLOCK_HOTKEYS, FUNCTION_HOTKEYS, LIST_TYPES } from './consts';\r\nimport { toggleMark, toggleBlock } from './utils'\r\nimport { toggleListBlock } from './lists';\r\n\r\nexport const hotkeyHandler = (event: any, editor: Editor) => {\r\n    for (const hotkey in HOTKEYS) {\r\n        if (isHotkey(hotkey, event)) {\r\n            event.preventDefault()\r\n            const mark = HOTKEYS[hotkey]\r\n            toggleMark(editor, mark)\r\n        }\r\n    }\r\n    for (const hotkey in BLOCK_HOTKEYS) {\r\n        if (isHotkey(hotkey, event)) {\r\n            event.preventDefault()\r\n            const block = BLOCK_HOTKEYS[hotkey]\r\n            // todo: modify this function.\r\n            // if something is toggled to a list but it's just before or after another one,\r\n            // it should be merged with it as a bullet point\r\n            if (LIST_TYPES.includes(block)) {\r\n                switch (block) {\r\n                    case \"bulleted-list\":\r\n                        toggleListBlock(editor, \"bulleted-list\")\r\n                        break;\r\n                    case \"numbered-list\":\r\n                        toggleListBlock(editor, \"numbered-list\")\r\n                        break;\r\n                }\r\n            }\r\n            else\r\n                toggleBlock(editor, block)\r\n        }\r\n    }\r\n    for (const hotkey in FUNCTION_HOTKEYS) {\r\n        if (isHotkey(hotkey, event)) {\r\n            event.preventDefault()\r\n            const fn = FUNCTION_HOTKEYS[hotkey]\r\n            fn(editor)\r\n        }\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { InlineIcon } from '@iconify/react-with-api';\r\n\r\nexport const HelpModalContents: React.FC =() => {\r\n\r\n    return (\r\n        <>\r\n            <div className=\"modal-body\">\r\n              <p>FastDischarge aims to be an open-source medical documentation platform that is truly <em>fast</em>.</p>\r\n              <p>\r\n                With FastDischarge, you can easily create template fields and prepopulate them with commonly used values of your choice.\r\n                FastDischarge lets you write your progress notes and discharge letters faster, so you can get back to doctoring.\r\n              </p>\r\n              <p>FastDischarge doesn't use any central servers; everything you enter into it is stored locally on your device, so there are no data privacy issues to worry about! (Don't believe me? Check the source code on <a href=\"https://github.com/newageoflight/fast-discharge\">Github</a>!)</p>\r\n              <h2>Usage guide</h2>\r\n\r\n              <h3>Templates</h3>\r\n              <p>With FastDischarge you can create several kinds of template fields:</p>\r\n              <dl>\r\n                <dt>Selection (list)</dt>\r\n                <dd>To select from a simple list of terms (e.g. attending doctors), type in <kbd>{\"{{\"}</kbd></dd>\r\n                <dt>Multiple selection (list)</dt>\r\n                <dd>To select multiple items from a list of terms (e.g. background conditions), type in <kbd>[[</kbd></dd>\r\n                <dt>Dates</dt>\r\n                <dd>To insert a date-picker (e.g. for admission and discharge dates), type in <kbd>@@</kbd></dd>\r\n                <dt>Voids</dt>\r\n                <dd>To insert a void (whose sole purpose is to be given a name and replaced), type in <kbd>**</kbd></dd>\r\n              </dl>\r\n              <p><strong>For list template types, you can set options</strong> by clicking on the dropdown menu and typing in some text.</p>\r\n              <p><strong>Cycle to the next template field</strong> by pressing <kbd>TAB</kbd>; <strong>cycle to the previous template field</strong> by pressing <kbd>Shift+TAB</kbd></p>\r\n              <p>[UNDER DEVELOPMENT] You can also cycle to template fields by pressing <kbd>Ctrl+[</kbd> for the previous and <kbd>Ctrl+]</kbd> for the next</p>\r\n\r\n              <h3>Snippets and dot abbreviations</h3>\r\n              <p>If you frequently use a snippet, you can save it as a <strong>dot abbreviation</strong> by selecting it and clicking the <InlineIcon icon=\"bi:dot\" /> dot icon in the hovering selection menu. You will be asked to give it a name.</p>\r\n              <p>You can later invoke the snippet by typing <kbd>.nameOfYourAbbreviation</kbd>, e.g. if you named it \"cag\" type <kbd>.cag</kbd></p>\r\n              <h3>Finalising documents</h3>\r\n              <p>To finalise your document and <strong>copy its contents as plain text</strong> (e.g. Web DeLacy), press the <InlineIcon icon=\"ion:copy-outline\" /> button in the toolbar.</p>\r\n              <p>To finalise your document and <strong>copy its contents as rich text</strong> (e.g. PowerChart), press the <InlineIcon icon=\"ion:copy\" /> button in the toolbar.</p>\r\n              <h3>Taking your settings with you</h3>\r\n              <p>I'm still not sure if there are legal issues around having user accounts to store your abbreviations, especially when sensitive patient data is concerned, so you'll have to store them as files if you want to take them around.</p>\r\n              <p>For this there are the <InlineIcon icon=\"bx:bxs-save\" /> <strong>save my abbreviations</strong> and <InlineIcon icon=\"bi:cloud-upload\" /> <strong>load my abbreviations</strong> buttons</p>\r\n            </div>\r\n\r\n            <div className=\"modal-footer\">\r\n              <h2>Contributing/credits</h2>\r\n              <p>FastDischarge might frequently break and be full of bugs because it's still early days, so don't expect too much out of it!</p>\r\n              <p>\r\n                If you have experience working with Slate.js, React.js or Typescript, please consider contributing to this project on <a href=\"https://github.com/newageoflight/fast-discharge\">Github</a>.\r\n              </p>\r\n              <p>Developed by <a href=\"mailto:camint3rnal@live.com\">Christopher Chen</a> (JMO/Intern)</p>\r\n            </div>\r\n      </>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport Modal from \"react-modal\";\r\nimport \"./css/App.css\"\r\nimport logo from \"./running.svg\"\r\n\r\nimport { RichTextEditor } from './components/RichTextEditor';\r\nimport { InlineIcon } from '@iconify/react-with-api';\r\nimport { HelpModalContents } from './components/HelpModalContents';\r\n// fastDischarge should also be able to expose API endpoints where it receives parameters for certain values in a template\r\n\r\nfunction App() {\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header>\r\n        <h1>\r\n          <img src={logo} alt=\"Running man\" style={{height: \"1em\", display: \"inline-block\", transform: \"translateY(6px)\"}} />\r\n          FastDischarge\r\n        </h1>\r\n      </header>\r\n      <div className=\"editor-container\">\r\n        <RichTextEditor />\r\n      </div>\r\n      <footer>\r\n        <div className=\"oneline\">\r\n          <p>&copy; <a href=\"https://github.com/newageoflight\">Christopher Chen</a> 2021-</p>\r\n          <button onClick={() => setModalOpen(true)}>\r\n            <InlineIcon icon=\"bx:bx-help-circle\" />\r\n          </button>\r\n        </div>\r\n      </footer>\r\n      <Modal isOpen={modalOpen} onRequestClose={() => setModalOpen(false)} contentLabel=\"About FastDischarge\">\r\n        <div className=\"modal-header\">\r\n          <h2>About FastDischarge</h2>\r\n          <button onClick={() => setModalOpen(false)}><InlineIcon icon=\"eva:close-fill\" /></button>\r\n        </div>\r\n        <HelpModalContents />\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { RecoilRoot } from 'recoil';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <RecoilRoot>\r\n      <App />\r\n    </RecoilRoot>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}